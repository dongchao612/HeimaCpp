C++面向对象的三大特性为：==封装、继承、多态==



C++认为==万事万物都皆为对象==，对象上有其属性和行为



**例如：**

​	人可以作为对象，属性有姓名、年龄、身高、体重...，行为有走、跑、跳、吃饭、唱歌...

​	车也可以作为对象，属性有轮胎、方向盘、车灯...,行为有载人、放音乐、放空调...

​	具有相同性质的==对象==，我们可以抽象称为==类==，人属于人类，车属于车类


### 4.1 封装

#### 4.1.1  封装的意义

封装是C++面向对象三大特性之一

封装的意义：

* 将属性和行为作为一个整体，表现生活中的事物
* 将属性和行为加以权限控制



**封装意义一：**

​	在设计类的时候，属性和行为写在一起，表现事物

**语法：** `class 类名{   访问权限： 属性  / 行为  };`



**示例1：**设计一个圆类，求圆的周长

**示例代码：**

```C++
#include <iostream>

using namespace std;

// 圆周率
const double PI = 3.14;

// 封装一个圆类，求圆的周长
// class代表设计一个类，后面跟着的是类名

class Circle
{
   public:	// 访问权限  公共的权限
	// 行为
	// 获取到圆的周长
	double calculateZC()
	{
		// 2 * pi  * r
		// 获取圆的周长
		return 2 * PI * this->m_R;
	}

	// 属性
	int m_R;  // 半径
};

int main(int argc, char const *argv[])
{
	// 通过圆类，创建圆的对象
	// c1就是一个具体的圆
	Circle c1;
	c1.m_R = 10;  // 给圆对象的半径 进行赋值操作

	// 2 * pi * 10 = = 62.8
	cout << "圆的周长为： " << c1.calculateZC() << endl;

	return 0;
}
```





**示例2：**设计一个学生类，属性有姓名和学号，可以给姓名和学号赋值，可以显示学生的姓名和学号





**示例2代码：**

```C++
#include <iostream>
#include <string>

using namespace std;

//学生类
class Student
{
   public:
	void setName(string name) { this->m_Name = name; }
	void setID(int id) { this->m_Id = id; }

	void showStudent() { cout << "name:" << this->m_Name << " ID:" << this->m_Id << endl; }

   public:
	string m_Name;
	int m_Id;
};

int main(int argc, char const *argv[])
{
	Student stu_zs;
	stu_zs.setName("张三");
	stu_zs.setID(10001);

	stu_zs.showStudent();

	Student stu_ls;
	stu_ls.setName("李四");
	stu_ls.setID(10002);

	stu_ls.showStudent();

	return 0;
}
```









**封装意义二：**

类在设计时，可以把属性和行为放在不同的权限下，加以控制

访问权限有三种：



1. public        公共权限  
2. protected 保护权限
3. private      私有权限







**示例：**

```C++
#include <iostream>
#include <string>

using namespace std;

//三种权限
//公共权限  public     类内可以访问  类外可以访问
//保护权限  protected  类内可以访问  类外不可以访问
//私有权限  private    类内可以访问  类外不可以访问

class Person
{
	//姓名  公共权限
   public:
	string m_Name;

	//汽车  保护权限
   protected:
	string m_Car;

	//银行卡密码  私有权限
   private:
	int m_Password;

   public:
	void func()
	{
		this->m_Name = "张三";
		this->m_Car = "拖拉机";
		this->m_Password = 123456;
	}
};

int main(int argc, char const *argv[])
{
	Person p;
	p.m_Name = "李四";
	// p.m_Car = "奔驰";  //保护权限类外访问不到
	// p.m_Password = 123; //私有权限类外访问不到

	return 0;
}
```







#### 4.1.2 struct和class区别



在C++中 struct和class唯一的**区别**就在于 **默认的访问权限不同**

区别：

* struct 默认权限为公共
* class   默认权限为私有



```C++
#include <iostream>
#include <string>

using namespace std;

class C1
{
	int m_A;  //默认是私有权限
};

struct C2 {
	int m_A;  //默认是公共权限
};

int main(int argc, char const *argv[])
{
	// 在C++中 struct和class唯一的区别就在于默认的访问权限不同
	// - struct 默认权限为公共
	// - class   默认权限为私有

	C1 c1;
	// c1.m_A = 10;  //错误，访问权限是私有

	C2 c2;
	c2.m_A = 10;  //正确，访问权限是公共

	return 0;
}

```













#### 4.1.3 成员属性设置为私有



**优点1：**将所有成员属性设置为私有，可以自己控制读写权限

**优点2：**对于写权限，我们可以检测数据的有效性



**示例：**

```C++
#include <iostream>
#include <string>

using namespace std;

class Person
{
   public:
	//姓名设置可读可写
	void setName(string name) { this->m_Name = name; }
	string getName() { return this->m_Name; }

	//获取年龄
	int getAge() { return this->m_Age; }
#if 1
	//设置年龄
	void setAge(int age)
	{
		if (age < 0 || age > 150) {
			cout << "年龄输出有误，请重新输入!" << endl;
			return;
		}
		this->m_Age = age;
	}
#endif

	//情人设置为只写
	void setLover(string lover) { this->m_Lover = lover; }

   private:
	string m_Name;	//可读可写  姓名

	int m_Age = 18;	 //只读  年龄

	string m_Lover;	 //只写  情人
};

int main(int argc, char const *argv[])
{
	// 优点1：将所有成员属性设置为私有，可以自己控制读写权限
	// 优点2：对于写权限，我们可以检测数据的有效性

	Person p;

	// 姓名设置
	// p.m_Name="张三";
	p.setName("张三");
	cout << "姓名： " << p.getName() << endl;

	//年龄设置
	p.setAge(-50);
	cout << "年龄： " << p.getAge() << endl;

	//情人设置
	p.setLover("小丽");
	// cout << "情人： " << p.m_Lover << endl;  //只写属性，不可以读取
	return 0;
}

```









**练习案例1：设计立方体类**

设计立方体类(Cube)

求出立方体的面积和体积

分别用全局函数和成员函数判断两个立方体是否相等。

**示例：**

```c++
#include <iostream>
#include <string>

using namespace std;

/*
设计立方体类(Cube)
	1、求出立方体的面积和体积。
	2、分别用全局函数和成员函数判断两个立方体是否相等。
*/

class Cube
{
   private:
	int m_L;  // 长
	int m_W;  //宽
	int m_H;  //高

   public:
	void setL(int L) { this->m_L = L; }
	int getL() { return this->m_L; }

	void setW(int W) { this->m_W = W; }
	int getW() { return this->m_W; }

	void setH(int H) { this->m_H = H; }
	int getH() { return this->m_H; }

	// 获取表面积
	int calculateS() { return 2 * (this->m_L * this->m_W + this->m_W * this->m_H + this->m_H * this->m_L); }

	// 获取体积
	int calculateV() { return this->m_L * this->m_W * this->m_H; }

	// 成员函数判断两个立方体是否相等。
	bool isSameByClass(Cube &c)
	{
		cout << __FUNCTION__ << ":" << endl;
		if (this->m_L == c.getL() && this->m_W == c.getW() && this->m_H == c.getH()) {
			return true;
		} else {
			return false;
		}
	}
};

// 全局函数判断两个立方体是否相等。
bool isSame(Cube &c1, Cube &c2)
{
	cout << __FUNCTION__ << ":" << endl;
	if (c1.getL() == c2.getL() && c1.getW() == c2.getW() && c1.getH() == c2.getH()) {
		return true;
	} else {
		return false;
	}
}

int main(int argc, char const *argv[])
{
	Cube c1;

	c1.setL(10);
	c1.setH(10);
	c1.setW(10);

	cout << "c1的面积是：" << c1.calculateS() << endl;	// 600
	cout << "c1的体积是：" << c1.calculateV() << endl;	//  1000

	Cube c2;

	c2.setL(10);
	c2.setH(10);
	c2.setW(10);

	bool ret = isSame(c1, c2);
	if (ret) {
		cout << "c1、c2相等" << endl;
	} else {
		cout << "c1、c2不相等" << endl;
	}

	ret = c1.isSameByClass(c2);
	if (ret) {
		cout << "c1、c2相等" << endl;
	} else {
		cout << "c1、c2不相等" << endl;
	}

	return 0;
}

```



**练习案例2：点和圆的关系**

设计一个圆形类（Circle），和一个点类（Point），计算点和圆的关系。


**示例：**
```c++
// point.h
#ifndef CIRCLE_H
#define CIRCLE_H

#include "point.h"

class Circle
{
   private:
	int m_R;  // 半径

	Point m_Center;	 // 在类中可以让定义另一个类作为类中的成员

   public:
	void setR(int R) ;
	int getR() ;

	void setCenter(Point center);
	Point getCenter() ;
};

```c++
// point.cpp
#include "point.h"

void Point::setX(int x) { this->m_X = x; }
int Point::getX() { return this->m_X; }

void Point::setY(int y) { this->m_Y = y; }
int Point::getY() { return this->m_Y; }
```

```c++
// circle.h
#ifndef CIRCLE_H
#define CIRCLE_H

#include "point.h"

class Circle
{
   private:
	int m_R;  // 半径

	Point m_Center;	 // 在类中可以让定义另一个类作为类中的成员

   public:
	void setR(int R) ;
	int getR() ;

	void setCenter(Point center);
	Point getCenter() ;
};


#endif   //  CIRCLE_H

```

```c++
// circle.cpp
#include "circle.h"

void Circle::setR(int R) { this->m_R = R; }
int Circle::getR() { return this->m_R; }

void Circle::setCenter(Point center) { this->m_Center = center; }
Point Circle::getCenter() { return this->m_Center; }
```
#endif   //  CIRCLE_H

```